C51 COMPILER V9.60.7.0   MAIN                                                              05/25/2024 15:46:50 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\main
                    -.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          #include <reg51.h>   // Include header file for 8051
   2          
   3          // Define LCD control pins
   4          sbit lcdRegisterSelect = P3^7;       // Register select pin for LCD
   5          sbit lcdEnable = P3^6;               // Enable pin for LCD
   6          
   7          // Define keypad row and column pins
   8          sbit row1 = P1^0;
   9          sbit row2 = P1^1;
  10          sbit row3 = P1^2;
  11          sbit row4 = P1^3;
  12          sbit column1 = P1^4;
  13          sbit column2 = P1^5;
  14          sbit column3 = P1^6;
  15          
  16          // Function prototypes
  17          void delayMilliseconds(unsigned int ms);
  18          void sendLcdCommand(unsigned char command);
  19          void sendLcdData(unsigned char _data);
  20          void initializeLcdDisplay(void);
  21          unsigned char scanKeypad(void);
  22          void displayNumberOnLcd(unsigned char number);
  23          
  24          // Main function
  25          int main() {
  26   1          unsigned char key;
  27   1      
  28   1          initializeLcdDisplay();  // Initialize the LCD display
  29   1      
  30   1          while (1) {
  31   2              key = scanKeypad();  // Read key from keypad
  32   2              if (key != ' ') {    // Check if a key is pressed
  33   3                  displayNumberOnLcd(key);  // Display the number on LCD
  34   3              }
  35   2          }
  36   1      
  37   1          return 0;
  38   1      }
  39          
  40          // Implement a simple delay function
  41          void delayMilliseconds(unsigned int ms) {
  42   1          unsigned int i, j;
  43   1          for (i = 0; i < ms; i++)
  44   1              for (j = 0; j < 127; j++);
  45   1      }
  46          
  47          // Send a command to the LCD
  48          void sendLcdCommand(unsigned char command) {
  49   1          lcdRegisterSelect = 0;  // Command mode
  50   1          P2 = command;           // Place command on the bus
  51   1          lcdEnable = 1;          // Pulse enable
  52   1          delayMilliseconds(1);
  53   1          lcdEnable = 0;
  54   1          delayMilliseconds(5);
C51 COMPILER V9.60.7.0   MAIN                                                              05/25/2024 15:46:50 PAGE 2   

  55   1      }
  56          
  57          // Send data to the LCD
  58          void sendLcdData(unsigned char _data) {
  59   1          lcdRegisterSelect = 1;  // Data mode
  60   1          P2 = _data;              // Place data on the bus
  61   1          lcdEnable = 1;          // Pulse enable
  62   1          delayMilliseconds(1);
  63   1          lcdEnable = 0;
  64   1          delayMilliseconds(5);
  65   1      }
  66          
  67          // Initialize the LCD
  68          void initializeLcdDisplay(void) {
  69   1          delayMilliseconds(15);
  70   1          sendLcdCommand(0x38);  // Function set: 2 Lines, 8-bit mode
  71   1          sendLcdCommand(0x0E);  // Display ON, cursor ON
  72   1          sendLcdCommand(0x01);  // Clear display
  73   1          sendLcdCommand(0x06);  // Entry mode set
  74   1      }
  75          
  76          // Function to read the keypad
  77          unsigned char scanKeypad(void) {
  78   1          unsigned char keyMap[4][3] = {{'7', '8', '9'}, {'4', '5', '6'}, {'1', '2', '3'}, {' ', '0', ' '}};
  79   1          unsigned char row, col;
  80   1      
  81   1          for (row = 0; row < 4; row++) {
  82   2              P1 = ~(1 << row);  // Ground one row at a time
  83   2      
  84   2              for (col = 0; col < 3; col++) {
  85   3                  if (!(P1 & (1 << (col + 4)))) {  // Check if column is low
  86   4                      delayMilliseconds(20);       // Debounce delay
  87   4                      while (!(P1 & (1 << (col + 4))));  // Wait for key release
  88   4                      return keyMap[row][col];    // Return the corresponding key
  89   4                  }
  90   3              }
  91   2          }
  92   1      
  93   1          return ' ';  // Return space if no key is pressed
  94   1      }
  95          
  96          // Display a number on the LCD
  97          void displayNumberOnLcd(unsigned char number) {
  98   1          sendLcdCommand(0x80);  // Move cursor to the first line
  99   1          sendLcdData(number);   // Display the number
 100   1      }
*** WARNING C294 IN LINE 37 OF main.c: unreachable code


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    251    ----
   CONSTANT SIZE    =     12    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----      14
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  1 WARNING(S),  0 ERROR(S)
